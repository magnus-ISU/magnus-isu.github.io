import"../chunks/Bg9kRutz.js";import"../chunks/69_IOA4Y.js";import{l as _e,h as ve,w as fe,aN as he,aC as te,i as g,r as _,s as y,t as W,f as ae,j as t,aQ as I,e as me,g as be,n as ge,aR as ke,aS as h}from"../chunks/Da0nnPzC.js";import{l as re,s as j,e as L}from"../chunks/Dad94sqd.js";import{a as S,t as B,c as ye}from"../chunks/-Ct6wzUb.js";import{i as G}from"../chunks/pJBJIWGn.js";import{e as J,i as P,r as pe}from"../chunks/_G73yJXa.js";import{i as we}from"../chunks/Bc27eL3v.js";import{i as xe}from"../chunks/C-xoV1eZ.js";import{p as x}from"../chunks/DTVkCd3s.js";function Oe(a,i,e=i){var c=_e();re(a,"input",o=>{var d=o?a.defaultValue:a.value;if(d=Q(a)?z(d):d,e(d),c&&d!==(d=i())){var p=a.selectionStart,v=a.selectionEnd;a.value=d??"",v!==null&&(a.selectionStart=p,a.selectionEnd=Math.min(v,a.value.length))}}),(ve&&a.defaultValue!==a.value||fe(i)==null&&a.value)&&e(Q(a)?z(a.value):a.value),he(()=>{var o=i();Q(a)&&o===z(a.value)||a.type==="date"&&!o&&!a.value||o!==a.value&&(a.value=o??"")})}function Q(a){var i=a.type;return i==="number"||i==="range"}function z(a){return a===""?null:+a}function le(a,i,e){if(a.multiple)return je(a,i);for(var c of a.options){var o=Y(c);if(xe(o,i)){c.selected=!0;return}}(!e||i!==void 0)&&(a.selectedIndex=-1)}function Se(a,i){te(()=>{var e=new MutationObserver(()=>{var c=a.__value;le(a,c)});return e.observe(a,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{e.disconnect()}})}function ee(a,i,e=i){var c=!0;re(a,"change",o=>{var d=o?"[selected]":":checked",p;if(a.multiple)p=[].map.call(a.querySelectorAll(d),Y);else{var v=a.querySelector(d)??a.querySelector("option:not([disabled])");p=v&&Y(v)}e(p)}),te(()=>{var o=i();if(le(a,o,c),c&&o===void 0){var d=a.querySelector(":checked");d!==null&&(o=Y(d),e(o))}a.__value=o,c=!1}),Se(a)}function je(a,i){for(var e of a.options)e.selected=~i.indexOf(Y(e))}function Y(a){return"__value"in a?a.__value:a.value}var Be=B("<option> </option>"),qe=B("<option> </option>"),Te=B('<select style="float:right" class="svelte-18kfhrm"></select>'),Ce=B('<input style="float:right" class="svelte-18kfhrm">'),Ee=B('<div id="card" class="svelte-18kfhrm"><h1 class="svelte-18kfhrm"> </h1> <div id="resources" class="svelte-18kfhrm"><div> </div> <div> </div> <div> </div> <div> </div></div> <div><select class="svelte-18kfhrm"></select> <!> <!></div> <div> </div></div>');function Ne(a,i){let e=x(i,"name",8),c=x(i,"obelisk",8),o=x(i,"walls",8),d=x(i,"barracks",8),p=x(i,"soldiers",8),v=x(i,"action",12),E=x(i,"target",12),H=x(i,"lore",8),A=x(i,"cities",24,()=>({})),n=x(i,"actions",24,()=>({}));var l=Ee(),m=g(l),s=g(m,!0);_(m);var r=y(m,2),u=g(r),f=g(u);_(u);var b=y(u,2),U=g(b);_(b);var q=y(b,2),D=g(q);_(q);var T=y(q,2),C=g(T);_(T),_(r);var V=y(r,2),F=g(V);W(()=>{v(),I(()=>{n()})}),J(F,5,n,P,(O,w,M)=>{var k=Be();k.value=(k.__value=M)==null?"":M;var R=g(k,!0);_(k),W(()=>j(R,t(w))),S(O,k)}),_(F);var X=y(F,2);{var ie=O=>{var w=Te();W(()=>{E(),I(()=>{A(),e()})}),J(w,5,()=>Object.entries(A()),P,(M,k)=>{var R=ye(),ue=ae(R);{var de=K=>{var N=qe(),$={},ce=g(N,!0);_(N),W(()=>{$!==($=t(k)[0])&&(N.value=(N.__value=t(k)[0])==null?"":t(k)[0]),j(ce,t(k)[0])}),S(K,N)};G(ue,K=>{t(k)[0]!=e()&&K(de)})}S(M,R)}),_(w),ee(w,E),S(O,w)};G(X,O=>{v()===6&&O(ie)})}var se=y(X,2);{var oe=O=>{var w=Ce();pe(w),Oe(w,E),S(O,w)};G(se,O=>{v()===7&&O(oe)})}_(V);var Z=y(V,2),ne=g(Z,!0);_(Z),_(l),W(()=>{j(s,e()),j(f,`Obelisk: ${c()??""}`),j(U,`Walls: ${o()??""}`),j(D,`Barracks: ${d()??""}`),j(C,`Soldiers: ${p()??""}`),j(ne,H())}),ee(F,v),S(a,l)}var We=B('<button class="svelte-1609fny">Begin the Obelisk...</button>'),Ie=B('<div style="display: flex; flex-direction:row; justify-content: center; align-items: center; width: 100%"><button class="svelte-1609fny">End this Turn</button> <button class="svelte-1609fny">Add another city-state</button></div>'),Ye=B(`<pre class="centered svelte-1609fny">u/revesvans'
                                  ╱╲
                                  ||
   ________ ___.          .__     ||          ____  __.
   \\_____  \\\\_ |__   ____ |  |    ||    _____|    |/ _|
    /   |   \\| __ \\_/ __ \\|  |    ||   /  ___/      &lsaquo; 
   /    |    \\ \\_\\ \\  ___/|  |__ |  |  \\___ \\|    |  \\ 
   \\_______  /___  /\\___  &rsaquo;____/_|__|_/____  &rsaquo;____|__ \\
           \\/    \\/     \\/     ╱______╲    \\/        \\/
</pre> <div id="cities" class="svelte-1609fny"></div> <!> <p class="lore svelte-1609fny">King, you must now gather your masons and bolster your defenses, for you have heard the plea of
	the gods. You must build an Obelisk.</p> <p class="lore svelte-1609fny">It will scrape the heavens and be immortal in its glory, and your name will be forever carved
	among its great stones. But hurry, for across the lands, the lords of strange lands have also
	heard the call. And should their efforts succeed while you tarry, your worship will go unheard,
	and your name die with you.</p> <div id="rules" class="svelte-1609fny"><p>You rule a city-state, with the following stats:</p> <ul><li>Obelisk: Your progress towards winning the game.</li> <li>Walls: These help you defend your obelisk from other players</li> <li>Barracks: These help you raise an army to prevent other players from completing their obelisks</li> <li>Soldiers: This is the number of soldiers in your army</li></ul> <p>Resources have a minimum of 0, and a maximum of 10 (except soldiers).</p> <p>Each turn you select one action to take from the following list:</p> <ul><li>Declare a Holiday: Gain 1 Soldier</li> <li>Build Obelisk: Gain 1 Obelisk</li> <li>Build Wall: Gain 1 Wall</li> <li>Build Barracks: Gain 1 Barracks</li> <li>Recruit Soldiers: You gain soldiers equal to the number of Barracks in your city</li> <li>Defend: Double your Wall stat until your next turn</li> <li>Attack <ul><li>Choose another player.</li> <li>If any other player has attacked that player, you lose one soldier for each soldier of the
					attacker with the highest number of soldiers.</li> <li>You then lose one soldier for each of your target’s Walls.</li> <li>If your target is not Attacking or Recruiting, you lose one soldier for each of their
					Soldiers. They also lose 1 soldier for each of your soldiers lost this way.</li> <li>For each soldier you have remaining, remove one of your target’s Obelisk. If they reach 0,
					they lose the game.</li></ul></li></ul> <p>You gain a soldier from your Holiday feast immediately. Then attacks are processed. Finally, all
		other actions are taken.</p> <p>You win if you get to 10 Obelisk or all your opponents have 0 Obelisk.</p></div>`,1);function Qe(a,i){me(i,!1);let e=ke({}),c=["Declare a Holiday","Build the Obelisk","Fortify the Walls","Construct a Barracks","Recruit more Soldiers","Defend the City","Attack your Foes","Cheat"];function o(){h(e,t(e)["State "+(1+Object.entries(t(e)).length)]={obelisk:1,walls:1,barracks:1,soldiers:1,action:0,target:"",lore:""})}function d(){let n=Object.entries(t(e)),l={};for(let s=0;s<n.length;s++){let r=n[s][0];if(t(e)[r].action===0){h(e,t(e)[r].soldiers++);continue}else(t(e)[r].action<0||t(e)[r].action>=c.length)&&alert("Illegal game state reached! action was '"+t(e)[r].action+"'")}for(let s=0;s<n.length;s++){let r=n[s][0];if(t(e)[r].action===6){let u=t(e)[r].target;if(!(u in t(e)))continue;let f=0;for(let T=0;T<n.length;T++){if(s===T)continue;let C=n[T][0];t(e)[C].action===6&&t(e)[C].target===t(e)[r].target&&t(e)[C].soldiers>f&&(f=t(e)[C].soldiers)}let b=t(e)[u].soldiers;({4:!0,6:!0})[t(e)[u].action]&&(b=0);let q=t(e)[u].walls;t(e)[u].action===5&&(q*=2),r in l||(l[r]=0),l[r]+=f+b+q;let D=l[r]-q-f;D>0&&(u in l||(l[u]=0),l[u]+=D),t(e)[r].soldiers>l[r]&&h(e,t(e)[u].obelisk=t(e)[u].obelisk-t(e)[r].soldiers+l[r]),t(e)[u].obelisk<0&&(h(e,t(e)[u].obelisk=0),alert(u+"'s Obelisk has been demolished!"))}}let m=Object.entries(l);for(let s=0;s<m.length;s++){let r=m[s][1];h(e,t(e)[m[s][0]].soldiers=Math.max(t(e)[m[s][0]].soldiers-r,0))}for(let s=0;s<n.length;s++){let r=n[s][0];switch(t(e)[r].action){case 1:h(e,t(e)[r].obelisk++),t(e)[r].obelisk===10&&alert(r+"'s obelisk has been completed! Hooray!");break;case 2:h(e,t(e)[r].walls++);break;case 3:h(e,t(e)[r].barracks++);break;case 4:h(e,t(e)[r].soldiers+=t(e)[r].barracks);break;case 7:let u=t(e)[r].target.split(" ");if(u.length!=4){alert("To cheat, put 4 space-seperated integers as the values of your 4 resources. Example: '9 1 3 20'");break}let f=[];for(let b=0;b<4;b++)if(f[b]=parseInt(u[b]),f[b]===NaN){alert("To cheat, put 4 space-seperated integers as the values of your 4 resources. Example: '9 1 3 20'");break}h(e,t(e)[r].obelisk=f[0]),h(e,t(e)[r].walls=f[1]),h(e,t(e)[r].barracks=f[2]),h(e,t(e)[r].soldiers=f[3]);break}}}we();var p=Ye(),v=y(ae(p),2);J(v,5,()=>Object.entries(t(e)),P,(n,l,m)=>{Ne(n,{get name(){return t(l)[0]},get obelisk(){return t(l)[1].obelisk},get walls(){return t(l)[1].walls},get barracks(){return t(l)[1].barracks},get soldiers(){return t(l)[1].soldiers},get cities(){return t(e)},actions:c,get action(){return t(l)[1].action},set action(s){t(l)[1].action=s,I(()=>Object.entries(t(e)))},get target(){return t(l)[1].target},set target(s){t(l)[1].target=s,I(()=>Object.entries(t(e)))},get lore(){return t(l)[1].lore},set lore(s){t(l)[1].lore=s,I(()=>Object.entries(t(e)))},$$legacy:!0})}),_(v);var E=y(v,2);{var H=n=>{var l=We();L("click",l,o),S(n,l)},A=n=>{var l=Ie(),m=g(l),s=y(m,2);_(l),L("click",m,d),L("click",s,o),S(n,l)};G(E,n=>{Object.entries(t(e)).length===0?n(H):n(A,!1)})}ge(6),S(a,p),be()}export{Qe as component};
