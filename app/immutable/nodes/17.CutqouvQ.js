import"../chunks/Bg9kRutz.js";import"../chunks/69_IOA4Y.js";import{b as z,h as D,e as F,a as U,c as G,am as X,az as J,aA as K,a4 as Q,ah as V,d as W,f as Z,g as O,i as ee,C as o,k as e,aB as f,s as d,j as q,r as I,t as te,aw as ae}from"../chunks/Bebrl_GB.js";import{e as re,s as T}from"../chunks/DAZUbNIE.js";import{i as se}from"../chunks/BFzG-UlA.js";import{d as M,e as oe,c as ie,a as A,t as L}from"../chunks/DL1Yrt72.js";import{r as ne,s as N}from"../chunks/CTjveqIR.js";import{b as le}from"../chunks/DXDjW1TS.js";import{i as ce}from"../chunks/DMwiSF4L.js";import{o as de}from"../chunks/maO4LbFL.js";function pe(S,k,v,i,_){var p=S,s="",n;z(()=>{if(s===(s=k()??"")){D&&F();return}n!==void 0&&(W(n),n=void 0),s!==""&&(n=U(()=>{if(D){G.data;for(var a=F(),b=a;a!==null&&(a.nodeType!==8||a.data!=="");)b=a,a=X(a);if(a===null)throw J(),K;M(G,b),p=Q(a);return}var R=s+"",m=oe(R);M(V(m),m.lastChild),p.before(m)}))})}var me=L('<h1 class="svelte-1o8qp5d">Guess the Price</h1> <p class="svelte-1o8qp5d"><strong>Product:</strong> </p> <img style="max-width: 200px; border-radius: 8px;"> <p class="svelte-1o8qp5d"><strong>Guesses Remaining:</strong> </p> <div class="svelte-1o8qp5d"><input type="number" step="0.01" min="0" placeholder="Enter your guess" style="padding: 5px; margin-right: 10px;"> <button style="padding: 5px 10px;">Submit Guess</button></div> <div style="margin-top: 10px;" class="svelte-1o8qp5d"><!></div>',1),ue=L('<p class="svelte-1o8qp5d">Loading product data...</p>');function Ie(S,k){Z(k,!1);let v=[],i=f(null),_=f(""),p=f(""),s=f(""),n=f(6),a=f(!1);de(async()=>{try{const t=await fetch("https://traderjoesprices.com/");console.log(t);const r=await t.text();console.log(r);const l=new DOMParser,c=l.parseFromString(r,"text/html").querySelector("table");if(!c)throw new Error("Product table not found");const g=c.querySelectorAll("tr");v=Array.from(g).slice(1).map(H=>{const E=H.querySelectorAll("td");return{name:E[0].textContent.trim(),price:parseFloat(E[1].textContent.trim().replace("$","")),url:E[2].querySelector("a").href}});const P=new Date().toISOString().split("T")[0],h=R(P),u=Math.floor(h*v.length);o(i,v[u]);const w=await(await fetch(e(i).url)).text(),x=l.parseFromString(w,"text/html").querySelector(".product-image img");o(_,x?x.src:"https://via.placeholder.com/200")}catch(t){console.error("Error fetching data:",t),o(s,"Error loading product data. Please try again later.")}});function b(){if(e(a))return;const t=parseFloat(e(p));if(isNaN(t)||t<=0){o(s,"Please enter a valid positive number.");return}ae(n,-1);const r=Math.abs(t-e(i).price)/e(i).price*100;r<=5?(o(s,"Congratulations! You guessed within 5% of the price!"),o(a,!0)):r>=25?o(s,'<div style="background-color: red; width: 20px; height: 20px; display: inline-block; margin-right: 5px;"></div> Your guess is 25% or more off.'):o(s,"Incorrect guess. Try again!"),e(n)===0&&!e(a)&&(o(s,`Game over. The price was $${e(i).price.toFixed(2)}.`),o(a,!0)),o(p,"")}function R(t){let r=BigInt(t)%BigInt(4294967296);const l=BigInt(1103515245),y=BigInt(12345),c=BigInt(4294967296);return r=(l*r+y)%c,Number(r)/4294967296}ce();var m=ie(),Y=O(m);{var $=t=>{var r=me(),l=d(O(r),2),y=d(q(l));I(l);var c=d(l,2),g=d(c,2),P=d(q(g));I(g);var h=d(g,2),u=q(h);ne(u);var B=d(u,2);I(h);var w=d(h,2),C=q(w);pe(C,()=>e(s)),I(w),te(()=>{T(y,` ${e(i).name??""}`),N(c,"src",e(_)),N(c,"alt",e(i).name),T(P,` ${e(n)??""}`),u.disabled=e(a),B.disabled=e(a)}),le(u,()=>e(p),x=>o(p,x)),re("click",B,b),A(t,r)},j=t=>{var r=ue();A(t,r)};se(Y,t=>{e(i)&&e(_)?t($):t(j,!1)})}A(S,m),ee()}export{Ie as component};
